"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["shared_components_AttachmentThumbnail_VideoAttachmentThumbnail_tsx-shared_components_Review_R-3e0587"],{12338:(e,i,t)=>{t.d(i,{Z:()=>ReviewRejectedMessage});var n=t(51138),r=t(97615),o=t(11789),s=t(82572),a=t(74512);function ReviewRejectedMessage(e){return(0,a.jsx)(r.Z,{alertStyle:"warning",...e,children:(0,a.jsx)(o._H,{id:"public.review_rejected_message",defaultMessage:"Make sure your review is complying with both [ProductReview]({productReviewGuidelinesUrl}) and [ACCC]({accGuidelinesUrl}) guidelines. You can always edit it and submit it again.",values:{productReviewGuidelinesUrl:(0,s.ZP)("posting_guidelines"),accGuidelinesUrl:"https://www.accc.gov.au/media-release/accc-releases-guidance-about-online-product-reviews"},returnType:"string",children:e=>(0,a.jsx)(n.Z,{source:e})})})}},59974:(e,i,t)=>{t.d(i,{Z:()=>VideoAttachmentThumbnail});var n=t(20872),r=t(74512);const o={height:180,width:320},s={height:360,width:480};function VideoAttachmentThumbnail(e){const{attachment:i,...t}=e;return"cloudflare_stream"===i.source?(0,r.jsx)(n.Z,{alt:"Thumbnail",src:`https://cloudflarestream.com/${i.id}/thumbnails/thumbnail.jpg?height=${o.height}&width=${o.width}&fit=fill`,srcSet:`https://cloudflarestream.com/${i.id}/thumbnails/thumbnail.jpg?height=${s.height}&width=${s.width}&fit=fill 2x`,...t}):(0,r.jsx)(n.Z,{alt:"Thumbnail",src:`https://img.youtube.com/vi/${i.id}/default.jpg`,srcSet:`https://img.youtube.com/vi/${i.id}/mqdefault.jpg 2x`,...t})}},31447:(e,i,t)=>{t.d(i,{Z:()=>ConsumerLocation});var n=t(32735),r=t(44472),o=t(74512);function ConsumerLocation({consumer:e}){return(0,o.jsx)(n.Fragment,{children:(0,r.Z)(e.locationName,e.legacyLocationName)})}},49917:(e,i,t)=>{t.d(i,{Z:()=>NumberOfLikes});var n=t(47819),r=t(11789),o=t(74512);function NumberOfLikes(e){const{numberOfLikes:i,numberProps:t}=e;return(0,o.jsx)(r._H,{id:"number_of_likes",defaultMessage:"{numberOfLikes, plural,\n          =0 {No likes}\n          =1 {{formattedNumberOfLikes} like}\n          other {{formattedNumberOfLikes} likes}\n        }",values:{numberOfLikes:i,formattedNumberOfLikes:(0,o.jsx)(n.Z,{...t,children:(0,o.jsx)(r.BK,{value:i})})}})}},67590:(e,i,t)=>{t.d(i,{Z:()=>De});var n=t(12338),r=t(58667),o=t(39290),s=t(42408),a=t(63801),l=t(19705),d=t(97615),c=t(32735),m=t(11789),u=t(98732),h=t(73999),p=t(91610),v=t(97258),g=t(88342),f=t(87505),x=t(34942),w=t(47756),b=t(70027),j=t(72392),Z=t(70728),y=t(6474),S=t(85527),_=t(80735),C=t(74581),k=t(73636),R=t(8068),A=t(82572),T=t(84098),E=t(74512);const I=(0,c.lazy)((()=>t.e("components_ReviewActions_ReviewActionsDropdownItems_tsx").then(t.bind(t,16015)))),N=(0,m.vU)({twitterMessage:{id:"review_actions.share.twitter_message",defaultMessage:"Have a look at this review {hasSubject, select,\n      true {for {subject} }\n      false {}\n    }on @Product_Review"},shareReviewModalTitle:{id:"public.review_actions.shared.modal.title",defaultMessage:"Share review"}});function ReviewActions(e){const i=(0,y.Z)(),t=(0,m.YB)(),{showModal:n}=(0,Z.Z)(),o=(0,p.Z)(e.listing,"brand.id");if(e.hideActions)return null;const s={flexBasis:{xs:100,sm:"auto"},flexGrow:{xs:1,sm:0},noBorder:!0,paddingY:0,textStyle:"muted"};return(0,E.jsx)(r.Z,{namespace:"actions",children:(0,E.jsx)(x.Z,{gap:{xs:2,sm:4},children:e.isBeingModerated?(0,E.jsx)(f.Z,{routeName:"consumer_platform_review_moderation",params:{reviewId:e.review.id,catalogId:(0,C.Z)(e.review.subject)},withLinkStyle:!0}):(0,E.jsxs)(c.Fragment,{children:[(0,E.jsx)(j.Z,{onChange:t=>i.dispatch((0,R.Y)({resourceType:"review",resourceId:e.review.id,reaction:t})),deferredActionEnvelope:{action:(0,R.Y)({resourceType:"review",resourceId:e.review.id,reaction:"like"}),context:{anchor:`#review-${e.review.id}`}},deferredActionType:"like_review",initialIsLiked:e.review.isUpVoted,initialNumberOfLikes:e.review.numberOfLikes,passwordlessAuthenticationSettings:{deferredCommand:(0,_.Z)((0,S.Z)("review",e.review.id,"like"),o?{listingBrandId:o}:void 0),redirectTo:(0,A.ZP)("single_review",{reviewId:e.review.id})},...s}),(0,E.jsx)(g.Z,{type:"submission_permission_role_only",permissionName:"canShare",resource:e.review,yes:()=>(0,E.jsx)(b.Z,{onClick:()=>{n({title:t.formatMessage(N.shareReviewModalTitle),content:(0,E.jsx)(T.Xo,{url:(0,A.ZP)("single_review",{reviewId:e.review.id},!0),twitterMessage:t.formatMessage(N.twitterMessage,{hasSubject:String(Boolean((0,k.Z)(e.review.subject))),subject:(0,k.Z)(e.review.subject)}),review:e.review}),bodyProps:{padding:4}})},...s})}),(0,E.jsx)(w.Z,{alwaysOpenModal:!0,iconOnly:!1,...s,children:(i,t)=>(0,E.jsx)(c.Suspense,{fallback:(0,E.jsx)(v.Z,{}),children:(0,E.jsx)(I,{review:e.review,listing:e.listing,onDelete:e.onDelete,onRestore:e.onRestore,resolve:i,reject:t})})})]})})})}var O=t(16318),L=t(64529),M=t(19718),B=t(31447),P=t(81261),F=t(87643),D=t(479),H=t(49917),U=t(13314);function ReviewAuthorStatistics({statistics:e}){return(0,E.jsxs)(s.Z,{element:U.Z,flexDirection:"row",fontSize:"xsmall",marginBottom:0,spaceX:1,unstyled:!0,children:[(0,E.jsx)(U.Z.Item,{flexShrink:0,children:(0,E.jsx)(D.Z,{numberOfReviews:e.numberOfReviews,numberProps:{fontWeight:"bold"}})}),e.numberOfLikes>0&&(0,E.jsx)(U.Z.Item,{flexShrink:0,children:(0,E.jsx)(H.Z,{numberOfLikes:e.numberOfLikes,numberProps:{fontWeight:"bold"}})})]})}function ReviewAuthor(e){const{author:i,listing:t,...n}=e,o=i.statistics.numberOfReviews>1;return(0,E.jsx)(r.Z,{namespace:"author",children:(0,E.jsxs)(L.Z,{position:"relative",gap:2,...n,children:[(0,E.jsx)(F.Z,{user:i,listing:t,size:"small",hideLink:!0,flexShrink:0}),(0,E.jsxs)(L.Z.Body,{display:"flex",alignSelf:"center",flexBasis:"auto",flexDirection:"column",lineHeight:"small",overflow:"hidden",children:[(0,E.jsxs)(s.Z,{element:M.Z,level:5,fake:!0,display:"inline-flex",alignItems:"baseline",flexDirection:o?"row":"column",marginBottom:0,children:[(0,E.jsx)(P.Z,{author:i,linkProps:{nowrap:!0,stretchedLink:!0}}),(0,E.jsx)(O.Z,{fontSize:"xsmall",marginLeft:o?1:void 0,textStyle:"muted",truncate:!0,children:(0,E.jsx)(B.Z,{consumer:i})})]}),o&&(0,E.jsx)(ReviewAuthorStatistics,{statistics:i.statistics})]})]})})}var Y=t(59879),V=t(93187),z=t(95359),W=t(77589);function ExpandComments(e){return 0===e.numberOfComments?null:(0,E.jsx)(W.Z.Toggle,{onClick:e.onClick,buttonSize:"small",buttonStyle:"link",backgroundColor:"light",borderRadius:"none",fontWeight:e.renderViewMoreLabel?"normal":"bold",lineHeight:"small",noBorder:!0,paddingX:4,paddingY:2,textAlign:e.renderViewMoreLabel?"center":"left",textStyle:e.renderViewMoreLabel?"link":"body",children:(0,E.jsx)(m._H,{id:"expand_comments.label",defaultMessage:"{renderViewMoreLabel, select,\n          true  {{numberOfComments, plural,\n            =1    {View # more comment}\n            other {View # more comments}\n          }}\n          false {{numberOfComments, plural,\n            =1    {Read # comment}\n            other {Read # comments}\n          }}\n        }",values:{numberOfComments:e.numberOfComments,renderViewMoreLabel:e.renderViewMoreLabel}})})}var X=t(76719),$=t(59838),G=t(4113),K=t.n(G),q=t(54553),J=t(67759),Q=t(12552),ee=t(23992),ie=t(47603),te=t(92401),ne=t(17656),re=t(55570),oe=t(31826),se=t(6780),ae=t(2486),le=t(74410),de=t(29176),ce=t(71070),me=t(65966);const ue=(0,de.Z)({body:(0,ce.C1)()});const he=(0,le.Bd)({form:"commentForm",validate:e=>ue.validate(e)})((function CommentFormForm(e){const{autoFocus:i,error:t,hideCancelButton:n,onCancel:r,pristine:o,submitting:a}=e,l=(0,ae.Gc)();return(0,me.Z)(e.form,l,{expiresInDays:1}),(0,E.jsxs)(s.Z,{element:oe.Z,onSubmit:(0,le.eb)(e),spaceY:2,children:[(0,E.jsx)(m._H,{id:"public.comment_form.body.placeholder",defaultMessage:"Write your comment...",returnType:"string",children:e=>(0,E.jsx)(ne.Z,{triggerEvent:"onFocus",children:t=>(0,E.jsx)(le.gN,{name:"body",component:le.gx,componentProps:{autoFocus:i,minRows:3,placeholder:e,...t}})})}),t&&(0,E.jsx)(re.Z,{error:t}),(0,E.jsxs)(x.Z,{spaceX:1,children:[!n&&(0,E.jsx)(se.Z.Button,{onClick:r,isLoading:a,flexBasis:100,flexGrow:1,tracking:{id:"cancel_button"},children:"Cancel"}),(0,E.jsx)(se.Z.Submit,{isDisabled:o,isLoading:a,flexBasis:100,flexGrow:1,tracking:{id:"submit_button"},children:"Submit"})]})]})})),pe=K().bind({"comment-form-textarea":"E_Zdwr"});function CommentForm_CommentForm(e){const i=(0,Q.Z)(),{candidates:t,defaultFocused:n=!1,onSubmit:o,review:s}=e,a=(0,J.Z)(ee.Iu),[l,d]=(0,c.useState)(n),u=(0,q.Z)(),h=(0,c.useCallback)((async(e,t)=>{const n=i();return u().then((()=>o({reviewId:s.id,commentId:n,body:e.body},t)),te.F).then((()=>{d(!1)}))}),[]),p=(0,c.useCallback)((()=>{d(!1)}),[]),v=(0,c.useCallback)((()=>{d(!0)}),[]);return(0,E.jsx)(r.Z,{namespace:"comment_form",children:(0,E.jsx)($.Z,{candidates:t,label:e=>{return i={candidateLabel:e},(0,E.jsxs)(E.Fragment,{children:["Comment as ",i.candidateLabel]});var i},children:({chosenActor:i,dropdown:t})=>i?(0,E.jsxs)(L.Z,{backgroundColor:"light",paddingX:4,paddingY:2,spaceX:2,children:["guest"!==a.context.role&&(0,E.jsx)(F.Z,{user:(0,ie.tp)(i),size:"small",hideLink:!0,flexShrink:0}),(0,E.jsx)(L.Z.Body,{children:l?(0,E.jsxs)(c.Fragment,{children:[t,(0,E.jsx)(he,{...e,autoFocus:!0,onCancel:p,onSubmit:e=>h(e,i)})]}):(0,E.jsx)(m._H,{id:"public.comment_form.input.placeholder",defaultMessage:"Click here to type your message",returnType:"string",children:e=>(0,E.jsx)(X.Z,{size:"small",paddingX:2,placeholder:e,"aria-label":e,onFocus:v,readOnly:!0,className:pe("comment-form-textarea")})})})]}):null})})}var ve=t(71698),ge=t(14715),fe=t(47819),xe=t(47358),we=t(19737),be=t(32331),je=t(44203),Ze=t(3160),ye=t(78290),Se=t(30084),_e=t(2219),Ce=t(43096);const ke=K().bind({comment:"wOzAuc",isCompanyRepresentative:"CGf2Ck",isDeleted:"YkApTE"});function Comment_Comment(e){var i;const{listing:t,comment:n,defaultExpanded:o,isBeingModerated:s,isHighlighted:a,onExpand:l,review:d}=e,h=n.author.context.role===u.uU.COMPANY_REPRESENTATIVE,p=null==t||null===(i=t.brand)||void 0===i?void 0:i.id,v=(0,y.Z)(),w=(0,J.Z)(ee.Iu),[b,Z]=(0,c.useState)(!1),[k,T]=(0,c.useState)(),[I,N]=(0,c.useState)(n.body),[O,B]=(0,c.useState)(!1),{showNotification:D}=(0,_e.Z)(),H={backgroundColor:a?"warning-light":"light",paddingX:4,paddingY:2,className:ke("comment",{isCompanyRepresentative:h,isDeleted:O})};(0,c.useEffect)((()=>{N(n.body),b&&Z(!1)}),[n.body]);return O?(0,E.jsx)(fe.Z,{...H,element:"div",fontSize:"small",italic:!0,textStyle:"danger",children:"Comment deleted"}):(0,E.jsx)(r.Z,{namespace:"comment",children:(0,E.jsxs)(be.Z,{id:`comment-${n.id}`,testId:`comment-${n.id}`,...H,children:[(0,E.jsx)(r.Z,{namespace:"author",children:(0,E.jsxs)(L.Z,{alignItems:"center",marginBottom:2,position:"relative",spaceX:2,children:[(0,E.jsx)(F.Z,{user:n.author,listing:t,size:"small",hideLink:!0,flexShrink:0}),(0,E.jsx)(L.Z.Body,{overflow:"hidden",children:(0,E.jsxs)(M.Z,{level:5,fake:!0,display:"flex",flexDirection:"column",marginBottom:0,children:[(0,E.jsx)(P.Z,{author:n.author,linkProps:{stretchedLink:!0},displaySendPrivateMessageLink:!n.isAuthor&&[u.uU.CONSUMER,u.uU.GUEST].includes(w.context.role)}),(0,E.jsx)(fe.Z,{fontSize:"xsmall",fontWeight:"normal",textStyle:"muted",position:"relative",elevation:1,children:(0,E.jsx)(m.k6,{value:n.firstPublishedAt})})]})})]})}),b?(0,E.jsx)(he,{form:n.id,initialValues:{body:I},onCancel:function(){Z(!1),T(void 0)},onSubmit:function(e){const i=I;return v.dispatch((0,Ce.DF)({commentId:n.id,body:e.body,reviewId:d.id,actor:k?(0,ie.Sx)(k):void 0})).then((()=>{N(e.body),Z(!1),T(void 0)})).catch((()=>{N(i),Z(!1),T(void 0)}))},autoFocus:!0}):(0,E.jsxs)(c.Fragment,{children:[(0,E.jsx)(xe.Z,{text:I,fontSize:"small",truncateTo:200,truncateAfter:250,truncateIfGreaterThanLines:3,onExpand:l,linkify:n.author.context.role===u.uU.COMPANY_REPRESENTATIVE||n.author.id===w.id||w.context.role===u.uU.COMPANY_REPRESENTATIVE||w.context.role===u.uU.STAFF,autoExpandGroups:[d.id,"commentBody"],defaultExpanded:o}),s?(0,E.jsx)(f.Z,{routeName:"consumer_platform_comment_moderation",params:{commentId:n.id,catalogId:(0,C.Z)(d.subject)},withLinkStyle:!0}):(0,E.jsx)(r.Z,{namespace:"actions",children:(0,E.jsxs)(x.Z,{alignItems:"center",justifyContent:"between",marginTop:2,spaceX:4,children:[(0,E.jsx)(j.Z,{onChange:e=>v.dispatch((0,R.Y)({resourceType:"comment",resourceId:n.id,reaction:e})),deferredActionEnvelope:{action:(0,R.Y)({resourceType:"comment",resourceId:d.id,reaction:"like"}),context:{anchor:`#review-${d.id}`}},deferredActionType:"like_comment",initialIsLiked:n.isUpVoted,initialNumberOfLikes:n.numberOfLikes,passwordlessAuthenticationSettings:{deferredCommand:(0,_.Z)((0,S.Z)("comment",n.id,"like"),p?{listingBrandId:p}:void 0),redirectTo:(0,A.ZP)("single_review",{reviewId:d.id})},hideIcon:!0,buttonSize:"small"}),(0,E.jsxs)(we.Z,{spaceX:4,children:[!n.isAuthor&&(0,E.jsx)(ve.Z,{listing:t,resourceId:n.id,resourceType:"comment",children:e=>(0,E.jsx)(ye.Z,{onClick:e,buttonSize:"small",hideIcon:!0})}),(0,E.jsx)(g.Z,{permissionName:"canDelete",resource:{subject:d.subject,permissions:n.permissions},yes:e=>(0,E.jsx)(ge.Z,{element:je.Z,message:"Do you really want to delete this comment?",onClick:()=>function(e){return v.dispatch((0,Ce.e9)({commentId:n.id,reviewId:d.id,visibility:"private",actor:(0,ie.Sx)(e)})).then((()=>{B(!0)})).catch((()=>{B(!1),D({message:"Failed to delete comment. Please, try again later.",level:Se._.ERROR})}))}(e),visibility:n.visibility,hideIcon:!0,buttonSize:"small"})}),(0,E.jsx)(g.Z,{permissionName:"canEdit",resource:{subject:d.subject,permissions:n.permissions},yes:e=>(0,E.jsx)(Ze.Z,{onClick:()=>function(e){Z(!0),T(e)}(e),hideIcon:!0,buttonSize:"small"})}),w.context.role===u.uU.STAFF&&(0,E.jsx)(f.Z,{routeName:"consumer_platform_comment_moderation",params:{commentId:n.id,catalogId:(0,C.Z)(d.subject)},element:se.Z.Link,buttonSize:"small",buttonStyle:"link"})]})]})})]})]})})}var Re=t(35822),Ae=t(68949);function CommentCollectionStateManager(e){const{initialCollection:i,onSubmit:t,children:n}=e,r=(0,y.Z)(),[o,s]=(0,c.useState)(i);return n({collection:o,handleSubmitComment:(0,c.useCallback)(((e,i)=>{const n={...e,actor:(0,ie.Sx)(i)},o=(new Date).toISOString();return r.dispatch((0,Ce.rd)(n)).then((()=>{const r={author:(0,ie.tp)(i),body:e.body,firstPublishedAt:o,id:e.commentId,isAuthor:!0,isLiked:!1,isUpVoted:!1,numberOfLikes:0,permissions:(0,Ae.Z)(i,{canDelete:!0,canEdit:!0}),submittedAt:o,visibility:u.YJ.PUBLIC};s((e=>e.concat(r))),t&&t(n)}))}),[])})}var Te=t(57502);function NumberOfCommentsHeader(e){return(0,E.jsx)(M.Z,{level:5,fake:!0,textStyle:"body",backgroundColor:"light",marginBottom:0,paddingX:4,paddingY:2,children:(0,E.jsx)(m._H,{id:"public.comments.heading",defaultMessage:"{numberOfComments, plural,\n          =0    {No comments}\n          =1    {# comment}\n          other {# comments}\n        }",values:{numberOfComments:e.numberOfComments}})})}var Ee=t(56379);function TimeToReplyHeader(e){const i=(0,Ee.KF)(new Date(e.repliedAt),new Date(e.relativeTo)),t=(0,Ee.WZ)(i),n=(0,Ee.U3)(i,t);return(0,E.jsx)(fe.Z,{element:be.Z,backgroundColor:"light",fontSize:"small",italic:!0,paddingX:4,paddingY:2,textStyle:"muted",children:(r={respondedWithinTimeAmount:n,respondedWithinTimeUnit:n?(0,Ee.yE)(t):t},(0,E.jsxs)(E.Fragment,{children:["Took ",r.respondedWithinTimeAmount," ",r.respondedWithinTimeUnit," to reply (only shown to you)"]}))});var r}const Ie=K().bind({comments:"_RM0QU"});function ReviewCommentsSection(e){const i=(0,c.useMemo)((()=>({type:"submission_permission",permissionName:"canComment",submission:e.review})),[e.review]),{candidates:t}=(0,Te.Z)(i);return 0===e.review.comments.length&&0===t.length?null:(0,E.jsx)(CommentCollectionStateManager,{initialCollection:e.review.comments,children:i=>{var n;const r=i.collection.find((e=>e.author.context.role===u.uU.COMPANY_REPRESENTATIVE));return(0,E.jsxs)(s.Z,{testId:"comments",negativeMarginX:4,className:Ie("comments"),children:[null!==(n=e.review.permissions.company_representative)&&void 0!==n&&n.canComment&&r?(0,E.jsx)(TimeToReplyHeader,{repliedAt:r.firstPublishedAt,relativeTo:e.review.firstPublishedAt}):0===i.collection.length&&(0,E.jsx)(NumberOfCommentsHeader,{numberOfComments:0}),(0,E.jsx)(Re.Z,{items:i.collection,renderItem:(i,t)=>(0,E.jsx)(Comment_Comment,{comment:i,review:e.review,listing:e.listing,defaultExpanded:e.defaultExpanded||t,isBeingModerated:e.isBeingModerated,isHighlighted:e.highlightedCommentId===i.id},i.id),renderToggleButton:({onClick:e,numberOfItemsLeft:t})=>(0,E.jsx)(ExpandComments,{onClick:e,numberOfComments:t,renderViewMoreLabel:t!==i.collection.length}),defaultNumberOfItemsVisible:e.defaultExpanded||t.length?1/0:e.review.rating>=4?0:3,hideToggleButtonWhenExpanded:!0,resetWhenItemsChange:!1,children:e=>e}),(0,E.jsx)(CommentForm_CommentForm,{form:e.review.id,candidates:t,review:e.review,onSubmit:i.handleSubmitComment})]})}},e.review.id)}const Ne=(0,c.memo)(ReviewCommentsSection);var Oe=t(40312),Le=t(6705),Me=t(51138),Be=t(3950);const ReviewFooterParagraph=e=>(0,E.jsx)(Le.Z,{fontSize:"small",textStyle:"muted",...e});function ReviewFooterSection(e){const i=e.review.subject,t=function(e){return e.type!==u.EW.ARCHIVED_ENTRY&&e.entry?(0,A.ZP)("write_review_form",{listingSlug:e.entry.slug}):e.type===u.EW.KNOWN_EXTERNAL_ENTRY?(0,A.ZP)("external_entry_write_review_form",{externalCatalogSlug:e.externalCatalog.slug,externalId:e.externalEntry.externalId}):null}(i),n=e.partitionedSpecifications.wasReviewIncentivised,r=e.review.tags.includes("incentivised_review"),o=(i.type===u.EW.KNOWN_EXTERNAL_ENTRY||i.type===u.EW.UNKNOWN_EXTERNAL_ENTRY)&&i.externalCatalog;function l(e){return(0,E.jsx)(Oe.Z,{modalOptions:{content:e,bodyProps:{padding:4},headerProps:{paddingBottom:0}},popoverOptions:{content:(0,E.jsx)(fe.Z,{display:"block",fontSize:"small",paddingX:2,paddingY:1,children:e}),trigger:"hover"},children:(0,E.jsx)(a.Z,{name:"help",height:21,width:14,cursor:"help"})})}return(0,E.jsxs)(s.Z,{spaceY:1,children:[(o||e.review.wasSolicitedByBrand)&&function(){var t,n,r,s;if(o){const e="ProductReview provides tools for retailers to collect reviews from their customers. Reviews are verified and moderated by ProductReview.";return(0,E.jsx)(ReviewFooterParagraph,{children:(s={externalCatalog:(0,E.jsx)(Be.Z.Static,{to:i.externalCatalog.officialUrl,external:!0,openNewTab:!0,breakWord:!0,textDecorationHover:"underline",textStyle:"link",tracking:{id:"external_catalog_link"},children:i.externalCatalog.name}),tooltip:l(e)},(0,E.jsxs)(E.Fragment,{children:["Originally posted on ",s.externalCatalog," using our platform ",s.tooltip]}))})}if(!e.review.wasSolicitedByBrand)return null;const a=(null===(t=e.listing)||void 0===t||null===(n=t.brand)||void 0===n?void 0:n.name)||"entry"in i&&(null===(r=i.entry)||void 0===r?void 0:r.fullName),d=(e=>(0,E.jsxs)(E.Fragment,{children:[e.brandNameOrSubjectName," uses tools provided by ProductReview to encourage their customers to write genuine reviews."]}))({brandNameOrSubjectName:a});return(0,E.jsx)(ReviewFooterParagraph,{children:(e=>(0,E.jsxs)(E.Fragment,{children:["Review collected in partnership with ",e.brandNameOrSubjectName," ",e.tooltip]}))({brandNameOrSubjectName:a,tooltip:l(d)})})}(),(n||r)&&(0,E.jsx)(ReviewFooterParagraph,{children:(0,E.jsx)(m._H,{id:"review.footer.incentivised_review",defaultMessage:"{role, select,\n              author {The reviewer stated that an incentive was offered for this review}\n              staff {This reviewer may have been incentivised for this review}\n            } {tooltip}",values:{role:n?"author":"staff",tooltip:l((0,E.jsx)(m._H,{id:"review.footer.incentivised_review.tooltip",defaultMessage:"ProductReview has strict policies for incentivised reviews (compliant with ACCC guidelines) and verifies that companies offer incentives equally for both positive and negative reviews. [Learn more](https://support.productreview.com.au/hc/en-us/articles/360001254656)",returnType:"string",children:e=>(0,E.jsx)(Me.Z,{source:e})}))}})}),!e.review.isAuthor&&t&&(0,E.jsx)(Be.Z,{to:t,destinationApp:"public",textDecorationHover:"underline",textStyle:"link",tracking:{id:"similar_opinion_link"},children:(0,E.jsx)(m._H,{id:"review.footer.similar_opinion_link",defaultMessage:"Review your last purchase on **ProductReview<HideOnMobile.Inline>.com.au</HideOnMobile.Inline>**",returnType:"string",children:e=>(0,E.jsx)(Me.Z,{source:e,element:c.Fragment,initialParser:"inline",trimY:!1,componentsAvailable:{HideOnMobile:({children:e})=>(0,E.jsx)(fe.Z,{display:{xs:"none",sm:"inline"},children:e})}})})})]})}function Pe(e){return(0,E.jsx)(d.Z,{alertStyle:"danger",marginBottom:0,children:(i={author:e.author.displayName,date:(0,E.jsx)(m.Ji,{value:e.firstPublishedAt||e.submittedAt,day:"numeric",month:"long",year:"numeric"})},(0,E.jsxs)(E.Fragment,{children:["The following review dated ",i.date," posted by ",i.author,", which was broadly negative, has been removed in order to protect the reviewer's and ProductReview.com.au's interests following a legal request on behalf of the company."]}))});var i}function Fe(e){var i;return(0,E.jsx)(o.Z,{content:(0,E.jsx)(m._H,{id:"review.heading.pinned_review.tooltip",defaultMessage:"{hasBrand, select,\n            true {Review pinned by {brandName}}\n            false {Review pinned}\n          }",values:{brandName:null===(i=e.brand)||void 0===i?void 0:i.name,hasBrand:Boolean(e.brand)}}),placement:"top-end",children:(0,E.jsx)(a.Z,{name:"pin",cursor:"help",alignSelf:"start",flexShrink:0,textStyle:"link"})})}function Review_Review(e,i){const{listing:t,review:o,pinned:a,defaultExpanded:d=!1,defaultSpecificationsExpanded:m=!1,hideActions:p=!1,highlightedCommentId:v,isBeingModerated:g=!1,onDelete:f,onRestore:x,renderCommentsSection:w=(e=>(0,E.jsx)(Ne,{...e})),renderFooterSection:b=(e=>(0,E.jsx)(ReviewFooterSection,{...e})),renderActionsSection:j=(e=>(0,E.jsx)(ReviewActions,{...e})),renderBodySection:Z=(e=>(0,E.jsx)(Y.Z,{...e})),renderSpecifications:y=(e=>(0,E.jsx)(z.Z,{...e})),renderAuthorSection:S=(e=>(0,E.jsx)(ReviewAuthor,{...e})),renderMediationSection:_=(e=>(0,E.jsx)(V.Z,{...e})),reviewSpecifications:C,showBestReviewBadge:k,showSubjectLink:R,containerProps:A}=e,T=(0,h.T)(C,o.specificationValues,o.resolvedReferences);return(0,E.jsx)(r.Z,{namespace:"review",children:(0,E.jsxs)(l.Z,{id:`review-${o.id}`,testId:`review-${o.id}`,ref:i,full:{xs:!0,md:!0},marginBottom:void 0,overflow:"hidden",...A,children:[(0,E.jsxs)(s.Z,{element:l.Z.Header,flexDirection:"row",gap:4,noBorder:!0,paddingBottom:0,paddingTop:4,children:[S({listing:t,author:o.author,flexGrow:1,overflowX:"hidden"}),a&&t&&Fe(t)]}),o.tags.includes("removed_due_to_legal_threats")?(0,E.jsx)(l.Z.Block,{children:Pe(o)}):(0,E.jsx)(c.Fragment,{children:(0,E.jsxs)(s.Z,{element:l.Z.Block,spaceY:4,children:[!a&&o.isAuthor&&o.authorSeeksMediation&&!o.isMediationCompleted&&o.mediationThreadId&&_({review:{id:o.id,mediationThreadId:o.mediationThreadId}}),o.approvalStatus===u.iM.REJECTED&&(0,E.jsx)(n.Z,{}),Z({review:o,defaultExpanded:d,listing:t,showBestReviewBadge:k,showSubjectLink:R}),y({review:o,partitionedSpecifications:T,defaultExpanded:d||m}),j({review:o,listing:t,hideActions:p,isBeingModerated:g,onDelete:f,onRestore:x}),w({listing:t,review:o,defaultExpanded:d,highlightedCommentId:v,isBeingModerated:g}),b({review:o,listing:t,partitionedSpecifications:T})]})})]})})}const De=(0,c.memo)((0,c.forwardRef)(Review_Review))},44472:(e,i,t)=>{t.d(i,{Z:()=>r});const n=e=>e.split(",").slice(-3).join(",").trim().replace(/, (Australia|AU)$/,"");function r(e,i){return e?n(e):i?n(i):null}}}]);
//# sourceMappingURL=https://cdn.productreview.com.au/assets/public/shared_components_AttachmentThumbnail_VideoAttachmentThumbnail_tsx-shared_components_Review_R-3e0587_ebc3cff1.js.map